#!/usr/bin/env sh

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æ£€æŸ¥æ˜¯å¦æœ‰æºä»£ç å˜æ›´
if git diff --cached --name-only | grep -qE "^src/.*\.(js|ts|jsx|tsx)$"; then
  echo "${YELLOW}âš ï¸  æ£€æµ‹åˆ°æºä»£ç å˜æ›´${NC}"
  echo "${YELLOW}ğŸ“¦ æ˜¯å¦éœ€è¦æ›´æ–°ç‰ˆæœ¬å·ï¼Ÿ${NC}"
  echo ""
  echo "å¯ç”¨å‘½ä»¤ï¼š"
  echo "  ${GREEN}npm run bump${NC}      - å¢åŠ è¡¥ä¸ç‰ˆæœ¬ (x.x.+1)"
  echo "  ${GREEN}npm run version:minor${NC} - å¢åŠ æ¬¡ç‰ˆæœ¬ (x.+1.0)"
  echo "  ${GREEN}npm run version:major${NC} - å¢åŠ ä¸»ç‰ˆæœ¬ (+1.0.0)"
  echo ""
  echo "${YELLOW}å¦‚æœå·²æ›´æ–°ç‰ˆæœ¬ï¼Œè¯·å¿½ç•¥æ­¤æç¤º${NC}"
  echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
fi

# æ„å»º user.js
npm run build

# å°†æ„å»ºäº§ç‰©æ·»åŠ åˆ°æš‚å­˜åŒº
git add dist/bilibili_tools.user.js

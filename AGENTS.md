# Bilibili Tools - AIå¼€å‘åŠ©æ‰‹æŒ‡å—

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. æºä»£ç ä¿®æ”¹
- âœ… **åªä¿®æ”¹** `src/` ç›®å½•ä¸‹çš„æ–‡ä»¶
- âŒ **ç¦æ­¢ä¿®æ”¹** `dist/` ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„æ„å»ºäº§ç‰©ï¼‰

### 2. ç‰ˆæœ¬ç®¡ç†ï¼ˆé‡è¦ï¼‰
**æ¯æ¬¡ä¿®æ”¹ä»£ç åå¿…é¡»æ‰§è¡Œï¼š**

```bash
npm run bump
```

è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨ï¼š
1. ç‰ˆæœ¬å· +0.0.1ï¼ˆå¦‚ v1.0.11 â†’ v1.0.12ï¼‰
2. æ›´æ–° `package.json` å’Œ `vite.config.js`
3. åœ¨ `VERSION_HISTORY.md` é¡¶éƒ¨æ·»åŠ æ–°ç‰ˆæœ¬è®°å½•
4. è‡ªåŠ¨æ„å»º `dist/bilibili_tools.user.js`

**ç„¶åå¿…é¡»å¡«å†™æ›´æ–°è¯´æ˜ï¼š**
- æ‰“å¼€ `VERSION_HISTORY.md`
- å°† `[å¾…å¡«å†™æ›´æ–°è¯´æ˜]` æ›¿æ¢ä¸ºå…·ä½“çš„æ›´æ–°å†…å®¹
- æ ¼å¼å‚è€ƒå†å²è®°å½•ï¼Œä½¿ç”¨æ¸…æ™°çš„ä¸­æ–‡æè¿°

### 3. ä»£ç è§„èŒƒ
- **æ³¨é‡Š**ï¼šæ‰€æœ‰å‡½æ•°å¿…é¡»ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š
- **å‘½å**ï¼šé©¼å³°å‘½åï¼ˆå‡½æ•°/å˜é‡ï¼‰ï¼Œå¸•æ–¯å¡å‘½åï¼ˆç±»ï¼‰
- **æ¨¡å—åŒ–**ï¼šä½¿ç”¨ ES6 import/export
- **æ—¥å¿—**ï¼šä½¿ç”¨ `logger.debug/info/warn/error`ï¼Œä¸ç”¨ `console.log`

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/                    # â† ä¿®æ”¹è¿™é‡Œ
â”œâ”€â”€ main.js            # ä¸»å…¥å£
â”œâ”€â”€ constants.js       # å¸¸é‡
â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘ï¼ˆAIã€Notionã€å­—å¹•ç­‰ï¼‰
â”œâ”€â”€ ui/                # UIç»„ä»¶
â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”œâ”€â”€ state/             # çŠ¶æ€ç®¡ç†
â””â”€â”€ utils/             # å·¥å…·å‡½æ•°

dist/                   # â† å‹¿ä¿®æ”¹ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â””â”€â”€ bilibili_tools.user.js

VERSION_HISTORY.md      # ç‰ˆæœ¬æ›´æ–°è®°å½•
```

## ğŸ”„ å¼€å‘æµç¨‹

1. **ä¿®æ”¹ä»£ç ** â†’ åœ¨ `src/` ä¸‹ä¿®æ”¹
2. **æ›´æ–°ç‰ˆæœ¬** â†’ è¿è¡Œ `npm run bump`
3. **å¡«å†™è¯´æ˜** â†’ ç¼–è¾‘ `VERSION_HISTORY.md` é¡¶éƒ¨
4. **æäº¤ä»£ç ** â†’ pre-commité’©å­ä¼šè‡ªåŠ¨æ„å»º

## ğŸ’¡ å¸¸ç”¨å‘½ä»¤

```bash
npm run build       # æ‰‹åŠ¨æ„å»º
npm run dev         # å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬å˜åŒ–ï¼‰
npm run bump        # ç‰ˆæœ¬æ›´æ–°+æ„å»ºï¼ˆæ¨èä½¿ç”¨ï¼‰
```

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | æ–‡ä»¶ä½ç½® | è¯´æ˜ |
|------|---------|------|
| å­—å¹•æå– | `services/SubtitleService.js` | è‡ªåŠ¨æå–Bç«™å­—å¹• |
| AIæ€»ç»“ | `services/AIService.js` | æ”¯æŒå¤šAIæœåŠ¡å•† |
| Notioné›†æˆ | `services/NotionService.js` | å‘é€ç¬”è®°åˆ°Notion |
| ç¬”è®°ç®¡ç† | `services/NotesService.js` | æ–‡å­—å’Œæˆªå›¾ç¬”è®° |
| æˆªå›¾åŠŸèƒ½ | `services/ScreenshotService.js` | è§†é¢‘æˆªå›¾ä¿å­˜ |
| æ’­æ”¾æ§åˆ¶ | `services/SpeedControlService.js` | å¿«æ·é”®æ§åˆ¶æ’­æ”¾ |
| UIæ¸²æŸ“ | `ui/UIRenderer.js` | ç•Œé¢æ¸²æŸ“ |
| äº‹ä»¶å¤„ç† | `ui/EventHandlers.js` | ç”¨æˆ·äº¤äº’ |

## âš™ï¸ é…ç½®è¯´æ˜

- **AIé…ç½®**ï¼šæ”¯æŒ OpenAIã€DeepSeekã€é€šä¹‰åƒé—®ç­‰
- **Notioné…ç½®**ï¼šéœ€è¦ API Key å’Œ Database/Page ID
- **å¿«æ·é”®**ï¼šå¯è‡ªå®šä¹‰æ‰€æœ‰å¿«æ·é”®
- **è°ƒè¯•æ¨¡å¼**ï¼šæ²¹çŒ´èœå• â†’ ğŸ”§ è°ƒè¯•æ¨¡å¼

## ğŸ“ å¼€å‘æç¤º

1. **æ—¥å¿—ä½¿ç”¨**
```javascript
import logger from '../utils/DebugLogger.js';

logger.debug('æ¨¡å—å', 'è°ƒè¯•ä¿¡æ¯');  // è°ƒè¯•æ¨¡å¼æ˜¾ç¤º
logger.info('æ¨¡å—å', 'é‡è¦ä¿¡æ¯');   // å§‹ç»ˆæ˜¾ç¤º
logger.warn('æ¨¡å—å', 'è­¦å‘Šä¿¡æ¯');   // è­¦å‘Š
logger.error('æ¨¡å—å', 'é”™è¯¯ä¿¡æ¯');  // é”™è¯¯
```

2. **Notion API**
```javascript
// Markdownè½¬Notion blocks
const blocks = this._convertMarkdownToNotionBlocks(markdown);

// æ”¯æŒçš„æ ¼å¼ï¼š# æ ‡é¢˜ã€**ç²—ä½“**ã€- åˆ—è¡¨ã€> å¼•ç”¨ç­‰
```

3. **çŠ¶æ€ç®¡ç†**
```javascript
import state from '../state/StateManager.js';

state.getVideoInfo();      // è·å–è§†é¢‘ä¿¡æ¯
state.getSubtitleData();   // è·å–å­—å¹•æ•°æ®
state.getAISummary();      // è·å–AIæ€»ç»“
```

## âœ… AIåŠ©æ‰‹æ£€æŸ¥æ¸…å•

ä¿®æ”¹ä»£ç å‰ç¡®è®¤ï¼š
- [ ] ç†è§£ç”¨æˆ·éœ€æ±‚
- [ ] ç¡®å®šéœ€è¦ä¿®æ”¹çš„ `src/` æ–‡ä»¶
- [ ] ä¿æŒä»£ç é£æ ¼ä¸€è‡´

ä¿®æ”¹ä»£ç åç¡®è®¤ï¼š
- [ ] è¿è¡Œ `npm run bump`
- [ ] ç¼–è¾‘ `VERSION_HISTORY.md` å¡«å†™æ›´æ–°è¯´æ˜
- [ ] ç¡®ä¿æ„å»ºæˆåŠŸï¼ˆæ— é”™è¯¯ï¼‰
- [ ] éªŒè¯åŠŸèƒ½æ­£å¸¸

# Bilibili Tools

一个功能强大的油猴脚本，整合了字幕提取、AI总结、笔记管理、播放控制、广告跳过等六大功能。

## 核心功能

### 1. 字幕提取与AI总结
- 自动提取B站视频字幕（AI字幕和人工字幕）
- 支持多种AI服务（OpenAI、OpenRouter、DeepSeek等）
- 流式渲染AI总结，实时显示
- 一键发送到Notion数据库

### 2. 笔记管理
- 选中任意文字，显示粉色钢笔图标保存笔记
- 本地存储，按日期自动分组
- 支持批量复制和删除

### 3. 播放速度控制
- 键盘快捷键：`,` 减速，`.` 加速
- 双击功能：`,,` 重置1x，`..` 设为2x
- 右Option键临时/永久加速
- 响度检测自动加速（`,` + `.` 同时按切换）

### 4. SponsorBlock广告跳过
- 自动跳过视频广告、推广等11种片段
- 进度条彩色标记，可点击查看详情
- 视频卡片智能标签（🔥精选、🏆顶级）

### 5. 自定义快捷键
- 所有快捷键均可自定义
- 支持Ctrl/Cmd、Alt、Shift组合键
- 冲突检测和提示

## 快速开始

### 安装

1. **克隆仓库**
```bash
git clone <repository-url>
cd bilibili_tools
```

2. **安装依赖**
```bash
npm install
```

3. **构建脚本**
```bash
npm run build
```

4. **安装到浏览器**
- 打开 `dist/bilibili_tools.user.js`
- 复制全部内容
- 在Tampermonkey中创建新脚本并粘贴保存

### 使用

#### 字幕提取
1. 打开B站视频，等待几秒
2. 右侧出现粉色小圆点，点击查看字幕
3. 点击魔法棒图标✨进行AI总结

#### 笔记保存
1. 在任意网页选中文字
2. 点击出现的粉色钢笔图标
3. 使用 `Cmd/Ctrl + L` 打开笔记管理

#### 速度控制
- `,` 减速 | `.` 加速
- `,,` 重置1x | `..` 2倍速
- `,` + `.` 同时按切换响度检测

#### 广告跳过
1. 菜单 → SponsorBlock设置
2. 勾选要自动跳过的类别
3. 保存（页面会刷新）

## 默认快捷键

| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 切换字幕面板 | Cmd/Ctrl + B | 显示/隐藏字幕 |
| 切换笔记面板 | Cmd/Ctrl + L | 显示/隐藏笔记 |
| 保存笔记 | Cmd/Ctrl + S | 保存选中文字 |
| 加速 | `.` | 每次+0.1x |
| 减速 | `,` | 每次-0.1x |
| 2倍速 | `..` (双击) | 直接2倍速 |
| 重置 | `,,` (双击) | 重置1倍速 |
| 响度检测 | `,` + `.` | 开关自动加速 |

## 开发

### 开发模式
```bash
npm run dev  # 文件变化时自动重新构建
```

### 项目结构
```
src/
├── main.js              # 主入口
├── constants.js         # 常量定义
├── state/              # 状态管理
├── services/           # 服务层（AI、Notion、字幕、笔记、速度、SponsorBlock）
├── ui/                 # UI层（渲染、事件、通知、各种模态框）
├── config/             # 配置管理
└── utils/              # 工具函数
```

### 技术栈
- Vite + vite-plugin-monkey（构建）
- marked（Markdown渲染）
- 自研状态管理和事件总线

## 油猴菜单

- AI配置
- Notion配置
- 笔记管理
- 速度控制
- SponsorBlock设置
- 快捷键设置
- 使用帮助
- 关于

## 许可

MIT License

## 作者

geraldpeng & claude 4.5 sonnet
